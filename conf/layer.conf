# We have a conf and classes directory, add to BBPATH
BBPATH .= ":${LAYERDIR}"

# We have recipes-* directories, add to BBFILES
BBFILES += "${LAYERDIR}/recipes-*/*/*.bb \
            ${LAYERDIR}/recipes-*/*/*.bbappend"

BBFILE_COLLECTIONS += "meta-camelpi"
BBFILE_PATTERN_meta-camelpi = "^${LAYERDIR}/"
BBFILE_PRIORITY_meta-camelpi = "6"

LAYERDEPENDS_meta-camelpi = "core"
LAYERSERIES_COMPAT_meta-camelpi = "whinlatter"

DISTRO_FEATURES:remove = "pulseaudio"

# Set hostname for Camel Audio system
hostname:pn-base-files = "camel-audio"

# Use initramfs WIC template for image generation
WKS_FILE = "sdimage-camelpi-initramfs.wks"
WKS_FILE_DEPENDS_BOOTIMG_PARTITION = ""

# Bundle initramfs into kernel during build
INITRAMFS_IMAGE = "camelpi-initramfs-image"
INITRAMFS_IMAGE_BUNDLE = "1"
BOOT_SPACE = "524288"
INITRAMFS_MAXSIZE = "400000"
IMAGE_FSTYPES:pn-${INITRAMFS_IMAGE} = "${INITRAMFS_FSTYPES}"
IMAGE_NAME_SUFFIX:pn-${INITRAMFS_IMAGE} = ""

# Enable WIC image generation only for camelpi-image (main image)
IMAGE_FSTYPES:pn-camelpi-image = "wic.bz2 wic.bmap"

WIC_CREATE_EXTRA_ARGS = "--no-fstab-update"
